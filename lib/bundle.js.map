{"version":3,"sources":["webpack:///webpack/bootstrap e9be68a6b57068f52d52","webpack:///./lib/chase.js","webpack:///./lib/game.js","webpack:///./lib/dog.js","webpack:///./lib/util.js","webpack:///./lib/movingObject.js","webpack:///./lib/cat.js","webpack:///./lib/spriteUtil.js","webpack:///./lib/background.js","webpack:///./lib/staticObject.js","webpack:///./lib/score.js","webpack:///./lib/fight.js","webpack:///./lib/gameOver.js","webpack:///./lib/gameView.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAC;;;;;;;ACZD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uCAAsC,oBAAoB;AAC1D;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA,IAAG;AACH;AACA,GAAE;AACF;AACA,IAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,GAAE;;AAEF;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,GAAE;AACF;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACrUA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAM;;AAEN;AACA;AACA;AACA,IAAG;;AAEH;AACA,2BAA0B,+BAA+B;AACzD;AACA;AACA;AACA;;AAEA;;;;;;;AC/CA;;AAEA;AACA;AACA;;AAEA,8BAA6B,uBAAuB;AACpD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;AC/DA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,oBAAmB,aAAa;;AAEhC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AClCA;;AAEA;;AAEA,gBAAe;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACvDA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;;;;;ACpCA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA,KAAI;AACJ;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC7CA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;;;;;;;AClDA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;;;;;;AC1BA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e9be68a6b57068f52d52\n **/","var Game = require(\"./game\");\nvar GameView = require(\"./gameView\");\n\ndocument.addEventListener(\"DOMContentLoaded\", function(){\n\tvar modal = document.getElementsByTagName(\"section\")[0];\n  var canvasEl = document.getElementsByTagName(\"canvas\")[0];\n  canvasEl.width = Game.DIM_X;\n  canvasEl.height = Game.DIM_Y;\n\t\n  var ctx = canvasEl.getContext(\"2d\");\n  var game = new Game(canvasEl);\n  new GameView(game, ctx).welcome(modal);\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/chase.js\n ** module id = 0\n ** module chunks = 0\n **/","var Dog = require(\"./dog\");\nvar Cat = require(\"./cat\");\nvar Fight = require(\"./fight\");\nvar SpriteUtil = require(\"./spriteUtil\");\nvar Util = require(\"./util\");\nvar Background = require(\"./background\");\nvar GameOverImage = require(\"./gameOver\");\nvar Score = require(\"./score\");\n\nfunction _between(a, b, value) {\n\tvar min = Math.min(a, b),\n\tmax = Math.max(a, b);\n\n\treturn (value > min && value < max);\n}\n\nfunction _displayNewGameButton(ctx, buttonSize, buttonPos) {\n\tvar buttonX = buttonPos[0] - buttonSize[0] / 2;\n\tvar buttonY = buttonPos[1] - buttonSize[1] / 2;\n\n\tctx.fillStyle = \"white\";\n\tctx.strokeSytle = \"black\";\n\tctx.fillRect(buttonX, buttonY, buttonSize[0], buttonSize[1]);\n\tctx.strokeRect(buttonX, buttonY, buttonSize[0], buttonSize[1]);\n\n\tctx.font = 'bold 36pt Brush, cursive';\n\tctx.fillStyle = \"black\";\n\tctx.fillText(\"Play Again\", buttonX + 15, buttonY + 45);\n}\n\nfunction _fadeGameOverScreen(ctx) {\n\tctx.clearRect(0, 0, (this.fadeAway * 1.4), Game.DIM_Y);\n\tctx.clearRect(0, 0, Game.DIM_X, this.fadeAway);\n\tctx.clearRect(Game.DIM_X - (this.fadeAway * 1.4), 0, Game.DIM_X, Game.DIM_Y);\n\tctx.clearRect(0, Game.DIM_Y - this.fadeAway, Game.DIM_X, Game.DIM_Y);\n\tif (this.fadeAway < Game.DIM_X / 2) { this.fadeAway += 1; }\n\tGameOverImage.draw(ctx);\n\tScore.display(ctx, true, [Game.DIM_X / 2 - 125, Game.DIM_Y - 10]);\n}\n\nfunction _getRandomArbitrary(min, max) {\n  return Math.random() * (max - min) + min;\n}\n\nvar Game = function (canvas) {\n\tScore.reset();\n  this.dogs  = [];\n  this.cats = [];\n\tthis.fights = [];\n\tthis.background = new Background();\n\tthis.loss = false;\n\tthis.gameOverButtonAdded = false;\n\tthis.canvas = canvas;\n\tthis.mousePos = {\n\t\tx: this.centerPosition()[0],\n\t\ty: this.centerPosition()[1]\n\t};\n  this.addCat(canvas);\n\n\t//Dog spawning interval\n\tthis.dogSpawnToken = window.setInterval(this.addDog.bind(this, canvas), 2000);\n\t//Get the new mouse position every time the mouse moves\n\tcanvas.addEventListener('mousemove', function(e) {\n\t\tthis.mousePos = this.getMousePos(canvas, e);\n\t}.bind(this));\n};\n\nGame.DIM_X = 1000;\nGame.DIM_Y = 600;\nGame.NUM_DOGS = 55;\n\n\nGame.prototype.add = function (object) {\n  if (object.type === \"Dog\") {\n    this.dogs.push(object);\n  } else if (object.type === \"Cat\") {\n    this.cats.push(object);\n\t} else if (object.type === \"Fight\") {\n\t\tthis.fights.push(object);\n  } else {\n    throw \"Attempted to add an unexpected object?\";\n  }\n};\n\nGame.prototype.addCat = function (canvas) {\n\n\tvar catImage = new Image();\n\tcatImage.src = \"assets/sprites/Cat2.png\";\n\n\tvar catSprite = SpriteUtil.sprite({\n\t\tcontext: canvas.getContext(\"2d\"),\n    width: 240,\n    height: 60,\n\t\tpos: this.centerPosition(),\n    image: catImage,\n\t\tticksPerFrame: 10,\n\t\tnumberOfFrames: 6\n\t});\n\n\tvar cat = new Cat({\n\t\tpos: this.centerPosition(),\n\t\tgame: this,\n\t\tsprite: catSprite\n\t});\n\n\tthis.add(cat);\n\n\treturn cat;\n};\n\nGame.prototype.addDog = function (canvas) {\n\tif (this.dogs.length < Game.NUM_DOGS) {\n\n\t\tvar dogImage = new Image();\n\t\tdogImage.src = \"assets/sprites/Dog2.png\";\n\n\t\tvar dogSprite = SpriteUtil.sprite({\n\t\t\tcontext: canvas.getContext(\"2d\"),\n\t    width: 360,\n\t    height: 80,\n\t\t\tpos: this.randomizedSpawnPos(),\n\t    image: dogImage,\n\t\t\tticksPerFrame: 10,\n\t\t\tnumberOfFrames: 6\n\t\t});\n\n  \tthis.add(new Dog({\n\t\t\tgame: this,\n\t\t\tsprite: dogSprite\n\t\t}));\n\t}\n};\n\nGame.prototype.addFight = function (canvas, position) {\n\n\tvar fightImage = new Image();\n\tfightImage.src = \"assets/sprites/fight.png\";\n\n\tvar fightSprite = SpriteUtil.sprite({\n\t\tcontext: canvas,\n\t\twidth: 300,\n\t\theight: 60,\n\t\tpos: position,\n\t\timage: fightImage,\n\t\tticksPerFrame: 10,\n\t\tnumberOfFrames: 5\n\t});\n\n\tvar fight = new Fight({\n\t\tgame: this,\n\t\tsprite: fightSprite\n\t});\n\n\tthis.add(fight);\n\twindow.setTimeout(this.removeFight.bind(this, fight), 5000);\n\treturn fight;\n};\n\nGame.prototype.addNewGameButton = function (canvas){\n\tvar buttonSize = [260, 70];\n\tvar buttonPos = this.centerPosition();\n\tvar ctx = canvas.getContext(\"2d\");\n\tthis.gameOverButtonAdded = true;\n\n\t//Add event listener to check if it is on the button\n\tcanvas.addEventListener(\"mousedown\", function(e) {\n\t\tif (_between(buttonPos[0] - buttonSize[0] / 2,\n\t\t\t \t\t\t\t\t buttonPos[0] + buttonSize[0] / 2,\n\t\t\t\t\t\t\t\t e.offsetX) &&\n\t\t\t\t_between(buttonPos[1] - buttonSize[1] / 2,\n\t\t\t\t\t\t\t\t buttonPos[1] + buttonSize[1] / 2,\n\t\t\t\t\t\t\t   e.offsetY))\n\t\t{\n\t\t\tlocation.reload();\n\t\t}\n\t});\n};\n\n\nGame.prototype.allObjects = function () {\n  return [].concat(this.cats, this.dogs, this.fights);\n};\n\nGame.prototype.centerPosition = function () {\n\treturn [\n\t\tGame.DIM_X / 2,\n\t\tGame.DIM_Y / 2\n\t];\n};\n\nGame.prototype.checkCollisions = function () {\n  var game = this;\n\n  this.allObjects().forEach(function (obj1) {\n    game.allObjects().forEach(function (obj2) {\n      if (obj1 == obj2) {\n        // don't allow self-collision\n        return;\n      }\n      if (obj1.isCollidedWith(obj2)) {\n        obj1.collideWith(obj2);\n      }\n    });\n  });\n};\n\nGame.prototype.draw = function (ctx) {\n\tif (this.loss){\n\t\t_fadeGameOverScreen.call(this, ctx);\n\n\t\tif (this.gameOverButtonAdded){\n\t\t\tvar buttonSize = [260, 70];\n\t\t\tvar buttonPos = this.centerPosition();\n\t\t\t_displayNewGameButton(ctx, buttonSize, buttonPos);\n\t\t}\n\n\t} else {\n\t  ctx.clearRect(0, 0, Game.DIM_X, Game.DIM_Y);\n\t\tthis.background.draw(ctx);\n\t  this.allObjects().forEach(function (object) {\n\t\t\tobject.sprite.update();\n\t\t\tobject.sprite.render();\n\t  });\n\t\tScore.addPoints(1);\n\t\tScore.display(ctx, false);\n\t}\n};\n\nGame.prototype.gameOver = function () {\n\tGameOverImage.setup();\n\tthis.fadeAway = 0;\n\tthis.loss = true;\n\tthis.cats = [];\n\tthis.dogs = [];\n\twindow.clearInterval(this.dogSpawnToken);\n\twindow.setTimeout(this.addNewGameButton.bind(this, this.canvas), 4700);\n};\n\nGame.prototype.getMousePos = function (canvas, e) {\n\tvar rect = canvas.getBoundingClientRect();\n\treturn {\n\t\tx: e.clientX - rect.left,\n\t\ty: e.clientY - rect.top\n\t};\n};\n\nGame.prototype.moveObjects = function (delta) {\n\tvar center = this.centerPosition(),\n\t\t\tmousePos = this.mousePos;\n  this.allObjects().forEach(function (object) {\n\t\tobject.move(delta, mousePos, center);\n  }.bind(this));\n\t//Background is not in the allObjects list\n\t//so that it does not trigger collissions.\n\t//We will need to move it seperately\n\tthis.background.move(delta, mousePos, center);\n};\n\nGame.prototype.randomPosition = function () {\n  return [\n    Game.DIM_X * Math.random(),\n    Game.DIM_Y * Math.random()\n  ];\n};\n\nGame.prototype.randomizedSpawnPos = function () {\n\tvar spawnDecider = Math.random();\n\tif (spawnDecider < 0.25) {\n\t  return [\n\t    _getRandomArbitrary(0, Game.DIM_X) ,\n\t    _getRandomArbitrary(Game.DIM_Y + 5, Game.DIM_Y + 10)\n\t  ];\n\t} else if (spawnDecider >= 0.25 && spawnDecider < 0.5) {\n\t\treturn [\n\t    _getRandomArbitrary(0, Game.DIM_X) ,\n\t    _getRandomArbitrary(-10, -5)\n\t  ];\n\t} else if (spawnDecider >= 0.5 && spawnDecider < 0.75) {\n\t\treturn [\n\t    _getRandomArbitrary(Game.DIM_X + 5, Game.DIM_X + 10) ,\n\t    _getRandomArbitrary(0, Game.DIM_Y)\n\t  ];\n\t} else {\n\t\treturn [\n\t    _getRandomArbitrary(-10, -5) ,\n\t    _getRandomArbitrary(0, Game.DIM_Y)\n\t  ];\n\t}\n};\n\nGame.prototype.remove = function (object) {\n\tvar idx;\n  if (object instanceof Cat) {\n\t\tthis.gameOver();\n  } else if (object instanceof Dog) {\n    idx = this.dogs.indexOf(object);\n    this.dogs.splice(idx, 1);\n\t} else if (object instanceof Fight) {\n\t\tidx = this.fights.indexOf(object);\n\t\tthis.fights.splice(idx, 1);\n  } else {\n    throw \"Not an expected object to remove\";\n  }\n};\n\nGame.prototype.removeFight = function (object) {\n\tthis.remove(object);\n};\n\nGame.prototype.rotateObjects = function () {\n\tthis.allObjects().forEach(function (object) {\n\t\tif (object instanceof Cat) {\n\t    object.rotate(this.mousePos);\n\t\t} else if (object instanceof Dog) {\n\t\t\tobject.rotate(this.centerPosition());\n\t\t}\n  }.bind(this));\n};\n\nGame.prototype.step = function (delta) {\n  this.moveObjects(delta);\n\tthis.rotateObjects();\n  this.checkCollisions();\n};\n\nmodule.exports = Game;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/game.js\n ** module id = 1\n ** module chunks = 0\n **/","var Util = require(\"./util\");\nvar MovingObject = require(\"./movingObject\");\nvar Cat = require(\"./cat\");\nvar Score = require(\"./score\");\n\nvar DEFAULTS = {\n\tRADIUS: 25\n};\n\nvar Dog = function (options) {\n\toptions = options || {};\n  options.radius = DEFAULTS.RADIUS;\n  options.vel = options.vel || [0, 0];\n\toptions.sprite = options.sprite || {};\n\n  MovingObject.call(this, options);\n};\n\n\nUtil.inherits(Dog, MovingObject);\n\nDog.prototype.type = \"Dog\";\n\nDog.prototype.collideWith = function (otherObject) {\n  if (otherObject.type === \"Cat\") {\n    otherObject.remove();\n  } else if (otherObject.type === \"Dog\") {\n\t\tthis.game.addFight(this.sprite.context, this.sprite.pos);\n\t\tScore.addPoints(1000, this.sprite.pos.slice());\n\t\totherObject.remove();\n\t\tthis.remove();\n\t}\n};\n\n//Dogs always face the cat\nDog.prototype.rotate = function (centerPos) {\n\tvar dir = Util.dirBetween(centerPos, this.sprite.pos);\n\n\tvar angle = Math.atan2(dir[1], dir[0]);\n\tthis.sprite.angle = angle - Math.PI / 2;\n};\n\nmodule.exports = Dog;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/dog.js\n ** module id = 2\n ** module chunks = 0\n **/","var Util = {\n  // Normalize the length of the vector to 1, maintaining direction.\n  dir: function (vec) {\n    var norm = Util.norm(vec);\n\t\tif (norm) {\n\t    return Util.scale(vec, 1 / norm);\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n  },\n\n  // Find distance between two points.\n  dist: function (pos1, pos2) {\n    return Math.sqrt(\n      Math.pow(pos1[0] - pos2[0], 2) + Math.pow(pos1[1] - pos2[1], 2)\n    );\n  },\n\n\t// Find the direction from one object to another.\n\tdirBetween: function (startPos, destPos) {\n\t\tvar vec = [(destPos[0] - startPos[0]), (destPos[1] - startPos[1])];\n\t\treturn Util.dir(vec);\n\t},\n\n  // Find the length of the vector.\n  norm: function (vec) {\n    return Util.dist([0, 0], vec);\n  },\n\t//\n  // // Return a randomly oriented vector with the given length.\n  // randomVec : function (length) {\n  //   var deg = 2 * Math.PI * Math.random();\n  //   return Util.scale([Math.sin(deg), Math.cos(deg)], length);\n  // },\n\n  // Scale the length of a vector by the given amount.\n  scale: function (vec, m) {\n    return [vec[0] * m, vec[1] * m];\n  },\n\n  inherits: function (ChildClass, BaseClass) {\n    function Surrogate() { this.constructor = ChildClass; }\n    Surrogate.prototype = BaseClass.prototype;\n    ChildClass.prototype = new Surrogate();\n  }\n};\n\nmodule.exports = Util;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/util.js\n ** module id = 3\n ** module chunks = 0\n **/","var Util = require(\"./util\");\n\nfunction _getPlayerShift(pos, center) {\n\tvar dirBetween = Util.dirBetween([pos.x, pos.y], center),\n\t\t\tdirBetweenScale = Util.dist([pos.x, pos.y], center);\n\n\tif (dirBetweenScale > 250) { dirBetweenScale = 250; }\n\tif (dirBetweenScale < 1) {\n\t\tdirBetweenScale = 1;\n\t\tdirBetween = [0, 0];\n\t}\n\n\tdirBetweenScale *= MovingObject.CAT_SPEED;\n\treturn [dirBetween[0] * dirBetweenScale, dirBetween[1] * dirBetweenScale];\n}\n\nfunction _updatePosition(velocity, velocityScale, playerShift) {\n\tvar offset = [velocity[0] * velocityScale, velocity[1] * velocityScale];\n\tthis.sprite.pos[0] = this.sprite.pos[0] + offset[0] + playerShift[0];\n\tthis.sprite.pos[1] = this.sprite.pos[1] + offset[1] + playerShift[1];\n}\n\nfunction _updateVelocity(moveVel, velScaler) {\n\tthis.vel[0] = this.vel[0] + (moveVel[0] * velScaler);\n\tthis.vel[1] = this.vel[1] + (moveVel[1] * velScaler);\n}\n\nvar MovingObject = function (options) {\n  this.vel = options.vel;\n  this.radius = options.radius;\n\tthis.sprite = options.sprite;\n  this.game = options.game;\n};\n\nMovingObject.TURN_RADIUS = 5;\nMovingObject.CAT_SPEED = 0.01;\nMovingObject.DOG_SPEED = 0.015;\n\nMovingObject.prototype.collideWith = function (otherObject) {\n // default do nothing\n};\n\nMovingObject.prototype.isCollidedWith = function (otherObject) {\n  var centerDist = Util.dist(this.sprite.pos, otherObject.sprite.pos);\n  return centerDist < (this.radius + otherObject.radius);\n};\n\nvar NORMAL_FRAME_TIME_DELTA = 1000/60;\nMovingObject.prototype.move = function (timeDelta, mousePos, center) {\n\tvar moveVel = Util.dirBetween(this.sprite.pos, center);\n\t_updateVelocity.call(this, moveVel, MovingObject.TURN_RADIUS);\n\n\tvar velocityScale = timeDelta /\n\t\t\t\t\t\t\t\t\t\t\tNORMAL_FRAME_TIME_DELTA *\n\t\t\t\t\t\t\t\t\t\t\tMovingObject.DOG_SPEED,\n\t\t\tplayerShift = _getPlayerShift(mousePos, center);\n  _updatePosition.call(this, this.vel, velocityScale, playerShift);\n};\n\nMovingObject.prototype.remove = function () {\n  this.game.remove(this);\n};\n\nmodule.exports = MovingObject;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/movingObject.js\n ** module id = 4\n ** module chunks = 0\n **/","var MovingObject = require(\"./movingObject\");\nvar Util = require(\"./util\");\nvar spriteUtil = require(\"./spriteUtil\");\nvar Background = require(\"./background\");\n\nvar Cat = function (options) {\n  options.radius = options.radius || 10;\n  options.vel = options.vel || [0, 0];\n\toptions.sprite = options.sprite || {};\n  MovingObject.call(this, options);\n};\n\nUtil.inherits(Cat, MovingObject);\n\nCat.prototype.type = \"Cat\";\n\n//Update animation rate since Cat never really moves\nCat.prototype.move = function (timeDelta, mousePos, center) {\n\tvar direction = Util.dirBetween([mousePos.x, mousePos.y], center),\n\t\t\tspeed = Util.dist([mousePos.x, mousePos.y], center);\n\tif (speed > 250) { speed = 250; }\n\n\tthis.sprite.ticksPerFrame = Math.ceil(1000 / speed);\n\tvar shift = [direction[0] * speed, direction[1] * speed];\n\t// Background.updatePosition(-shift[0] * 0.01, -shift[1] * 0.01);\n};\n\n//Make cat always face mouse\nCat.prototype.rotate = function (mousePos) {\n\tvar dir = Util.dirBetween([mousePos.x, mousePos.y], this.sprite.pos);\n\tvar angle = Math.atan2(dir[1], dir[0]);\n\tthis.sprite.angle = angle - Math.PI / 2;\n};\n\nmodule.exports = Cat;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/cat.js\n ** module id = 5\n ** module chunks = 0\n **/","var spriteUtil = {\n\n\tsprite: function (options) {\n\n\t\tvar that = {},\n\t\t\tframeIndex = 0,\n\t\t\ttickCount = 0,\n\t\t\tnumberOfFrames = options.numberOfFrames || 1;\n\n\t\tthat.ticksPerFrame = options.ticksPerFrame || 0;\n\t\tthat.context = options.context;\n\t\tthat.width = options.width;\n\t\tthat.height = options.height;\n\t\tthat.image = options.image;\n\t\tthat.scaleRatio = 1;\n\t\tthat.pos = options.pos;\n\t\tthat.angle = 0;\n\n\t\tthat.update = function () {\n\t\t\ttickCount += 1;\n\t\t\tif (tickCount > that.ticksPerFrame) {\n\t\t\t\ttickCount = 0;\n  \t\t\t// If the current frame index is in range\n\t\t\t\tif (frameIndex < numberOfFrames - 1) {\n\t\t\t\t\tframeIndex += 1;\n\t\t\t\t} else {\n  \t\t\t\tframeIndex = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthat.render = function () {\n\n\t\t  // Draw the animation\n\t\t\tthat.context.save();\n\t\t\tthat.context.translate(that.pos[0], that.pos[1]);\n\t\t\tthat.context.rotate(that.angle);\n\t\t\tthat.context.translate(-that.width / (numberOfFrames * 2), -that.height / 2);\n\t\t  that.context.drawImage(\n\t\t    that.image,\n\t\t    frameIndex * that.width / numberOfFrames,\n\t\t    0,\n\t\t    that.width / numberOfFrames,\n\t\t    that.height,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t    that.width / numberOfFrames * that.scaleRatio,\n\t\t    that.height * that.scaleRatio);\n\t\t\t that.context.restore();\n\t\t};\n\n\t\treturn that;\n\t}\n};\n\nmodule.exports = spriteUtil;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/spriteUtil.js\n ** module id = 6\n ** module chunks = 0\n **/","var Util = require(\"./util\");\nvar StaticObject = require(\"./staticObject\");\n\nvar Background = function () {\n\tthis.x = 0;\n\tthis.y = 0;\n\n\tvar backgroundImage = new Image();\n\tbackgroundImage.src = \"assets/sprites/background_2.png\";\n\tthis.image = backgroundImage;\n};\n\nUtil.inherits(Background, StaticObject);\n\nBackground.prototype.updatePosition = function (pos) {\n\tthis.x = pos[0] ? this.x + pos[0] : this.x;\n\tthis.y = pos[1] ? this.y + pos[1] : this.y;\n\tthis.x = (this.x + 400) % 400;\n\tthis.y = (this.y + 400) % 400;\n};\n\nBackground.prototype.draw = function (context) {\n\tcontext.drawImage(\n\t\tthis.image,\n\t\tthis.x,\n\t\tthis.y,\n\t\t1000,\n\t\t600,\n\t\t0,\n\t\t0,\n\t\t1000,\n\t\t600\n\t);\n};\n\n\nmodule.exports = Background;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/background.js\n ** module id = 7\n ** module chunks = 0\n **/","var Util = require(\"./util\");\n\nvar StaticObject = function (options) {\n  this.radius = options.radius;\n\tthis.sprite = options.sprite;\n  this.game = options.game;\n};\n\n\nStaticObject.prototype.collideWith = function (otherObject) {\n\t// default do nothing\n};\n\n\nStaticObject.prototype.isCollidedWith = function (otherObject) {\n  var centerDist = Util.dist(this.sprite.pos, otherObject.sprite.pos);\n  return centerDist < (this.radius + otherObject.radius);\n};\n\nvar NORMAL_FRAME_TIME_DELTA = 1000/60;\nStaticObject.prototype.move = function (timeDelta, mousePos, center) {\n\n\tvar catDirection = Util.dirBetween([mousePos.x, mousePos.y], center),\n\t\t\tcatSpeed = Util.dist([mousePos.x, mousePos.y], center),\n\t\t\tshiftX = catDirection[0] * catSpeed * 0.01,\n\t\t\tshiftY = catDirection[1] * catSpeed * 0.01;\n\n\tthis.updatePosition([-shiftX, -shiftY]);\n};\n\nStaticObject.prototype.updatePosition = function (x, y) {\n\t//Do nothing\n};\n\nStaticObject.prototype.remove = function () {\n  //Do nothing, static objects are not removed in standard ways\n};\n\nmodule.exports = StaticObject;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/staticObject.js\n ** module id = 8\n ** module chunks = 0\n **/","var Score = {\n\treset: function (points) {\n\t\tthis.currentScore = 0;\n\t\tthis.pos = [20, 45];\n\t\tthis.scorePopups = [];\n\t},\n\n\taddPoints: function (points, pos) {\n\t\tthis.currentScore += points;\n\t\tif (points >= 250) {\n\t\t\tthis.scorePopups.push([points, pos]);\n\t\t\twindow.setTimeout(function () {\n\t\t\t\tthis.scorePopups.shift();\n\t\t\t}.bind(this), 1500);\n\t\t}\n\t},\n\n\tdisplay: function (ctx, gameOver, pos) {\n\t\tvar drawPos = pos || this.pos;\n\t\t_displayScore(this.currentScore, ctx, drawPos);\n\t\tif(!gameOver) {\n\t\t\t_displayPopups(this.scorePopups, ctx);\n\t\t}\n\t}\n};\n\n\nfunction _displayPopups(scorePopups, ctx) {\n\tscorePopups.forEach(function (popup) {\n\t\tpopup[1][1] += 1;\n\t\t ctx.font = \"bold 24pt Brush, cursive\";\n\t\tctx.fillStyle = 'yellow';\n\t\tctx.fillText(\n\t\t\t\"+\" + popup[0],\n\t\t\tpopup[1][0] - 20,\n\t\t\tpopup[1][1] - 20\n\t\t);\n\t});\n}\n\nfunction _displayScore(currentScore, ctx, pos) {\n\tctx.font = \"bold 36pt Caveat Brush, cursive\";\n\tctx.fillStyle = \"black\";\n\tctx.fillText(\"Score: \" + currentScore, pos[0], pos[1]);\n}\nmodule.exports = Score;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/score.js\n ** module id = 9\n ** module chunks = 0\n **/","var Util = require(\"./util\");\nvar StaticObject = require(\"./staticObject\");\nvar Cat = require(\"./cat\");\nvar Dog = require(\"./dog\");\nvar Score = require(\"./score\");\n\nvar Fight = function (options) {\n\toptions = options || {};\n  options.radius = options.radius || 25;\n  options.vel = [0, 0];\n\toptions.sprite = options.sprite || {};\n\n  StaticObject.call(this, options);\n};\n\n\nUtil.inherits(Fight, StaticObject);\n\n\nFight.prototype.type = \"Fight\";\n\n//Allows static object to move but appear to be at the same spot\nFight.prototype.updatePosition = function (pos) {\n\tthis.sprite.pos[0] = pos[0] ?\n\t\tthis.sprite.pos[0] - pos[0] :\n\t\tthis.sprite.pos[0];\n\tthis.sprite.pos[1] = pos[1] ?\n\t\tthis.sprite.pos[1] - pos[1] :\n\t\tthis.sprite.pos[1];\n};\n\nFight.prototype.collideWith = function (otherObject) {\n  if (otherObject.type === \"Cat\") {\n    otherObject.remove();\n  } else if (otherObject.type === \"Dog\") {\n\t\totherObject.remove();\n\t\tthis.sprite.scaleRatio += 0.2;\n\t\tthis.radius = this.sprite.height * this.sprite.scaleRatio / 2;\n\t\tScore.addPoints(\n\t\t\tMath.ceil(this.sprite.scaleRatio * 500),\n\t\t\tthis.sprite.pos.slice()\n\t\t);\n\t}\n};\n\nFight.prototype.rotate = function (centerPos) {\n\t//Duck typing\n};\n\n\nmodule.exports = Fight;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/fight.js\n ** module id = 10\n ** module chunks = 0\n **/","var Util = require(\"./util\");\n\nvar GameOverImage = {\n\tdraw: function (context) {\n\n\t\tcontext.drawImage(\n\t\t\tthis.image,\n\t\t\t0,\n\t\t\t0,\n\t\t\t1000,\n\t\t\t600\n\t\t);\n\t},\n\n\tsetup: function (options) {\n\t\toptions = options || {};\n\t\tthis.x = options.x || 0;\n\t\tthis.y = options.x || 0;\n\n\t\tvar gameOverImage = new Image();\n\t\tgameOverImage.src = \"assets/sprites/game_over.png\";\n\t\tthis.image = gameOverImage;\n\t}\n};\n\n\nmodule.exports = GameOverImage;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/gameOver.js\n ** module id = 11\n ** module chunks = 0\n **/","var GameView = function (game, ctx) {\n  this.ctx = ctx;\n  this.game = game;\n};\n\n\nGameView.prototype.animate = function(time){\n\tvar timeDelta = time - this.lastTime;\n\n\tthis.game.step(timeDelta);\n\n\tthis.game.draw(this.ctx);\n\tthis.lastTime = time;\n\n\t//every call to animate requests causes another call to animate\n\tthis.animationFrameToken = requestAnimationFrame(this.animate.bind(this));\n};\n\nGameView.prototype.end = function () {\n\tcancelAnimationFrame(this.animationFrameToken);\n};\n\nGameView.prototype.start = function () {\n\tthis.modal.classList.add(\"game-start\");\n\tthis.lastTime = 0;\n\t//start the animation\n\tthis.animationFrameToken = requestAnimationFrame(this.animate.bind(this));\n};\n\nGameView.prototype.welcome = function (modal) {\n\tthis.modal = modal;\n\t//Get the start button\n\tthis.modal.children[2].addEventListener(\"click\", this.start.bind(this));\n};\nmodule.exports = GameView;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/gameView.js\n ** module id = 12\n ** module chunks = 0\n **/"],"sourceRoot":""}